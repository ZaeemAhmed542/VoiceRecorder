{"version":3,"file":"index.modern.js","sources":["../src/Recorder/Recorder.js","../src/index.js"],"sourcesContent":["export class Recorder {\r\n  constructor(options, upload, stream) {\r\n    this.options = options || []\r\n    this.upload = upload\r\n    this.stream = stream\r\n  }\r\n\r\n  setUpRecorder = async () => {\r\n    this.chunks = []\r\n    this.mediaRecorder = new window.MediaRecorder(this.stream, this.options)\r\n    this.mediaRecorder.ondataavailable = (e) => {\r\n      this.chunks.push(e.data)\r\n    }\r\n    this.mediaRecorder.onstop = this.onStop\r\n  }\r\n\r\n  startRecording = () => {\r\n    if (this.mediaRecorder && this.mediaRecorder.state != 'paused') {\r\n      this.mediaRecorder.start()\r\n    } else if (this.mediaRecorder) {\r\n      this.mediaRecorder.resume()\r\n    }\r\n  }\r\n\r\n  stopRecording = () => {\r\n    if (this.mediaRecorder && this.mediaRecorder.state !== 'inactive') {\r\n      this.mediaRecorder.stop()\r\n    }\r\n  }\r\n\r\n  pauseRecording = () => {\r\n    if (this.mediaRecorder && this.mediaRecorder.state !== 'inactive') {\r\n      this.mediaRecorder.pause()\r\n    }\r\n  }\r\n\r\n  onStop = () => {\r\n    const blob = new window.Blob(this.chunks, {\r\n      type: 'audio/webm'\r\n    })\r\n    this.upload(blob)\r\n    this.chunks = []\r\n  }\r\n}\r\n","import React, { createContext, useContext } from 'react'\r\nimport { Recorder } from './Recorder/Recorder'\r\n\r\nconst VoiceRecorderContext = createContext({})\r\n\r\nexport const useVoiceRecorder = () => {\r\n  const controls = useContext(VoiceRecorderContext)\r\n  return controls\r\n}\r\n\r\nexport class VoiceRecorder extends React.Component {\r\n  componentDidMount = async () => {\r\n    const { audioUpload, options, stream } = this.props\r\n    this.recorder = new Recorder(options, audioUpload, stream)\r\n    await this.recorder.setUpRecorder()\r\n  }\r\n  render() {\r\n    const controls = {\r\n      start: () => this.recorder.startRecording(),\r\n      pause: () => this.recorder.pauseRecording(),\r\n      stop: () => this.recorder.stopRecording(),\r\n    }\r\n    return (\r\n      <VoiceRecorderContext.Provider value={controls}>\r\n        {this.props.children}\r\n      </VoiceRecorderContext.Provider>\r\n    )\r\n  }\r\n}\r\n"],"names":["Recorder","options","upload","stream","setUpRecorder","chunks","mediaRecorder","window","MediaRecorder","ondataavailable","e","push","data","onstop","onStop","startRecording","state","start","resume","stopRecording","stop","pauseRecording","pause","blob","Blob","type","VoiceRecorderContext","createContext","useVoiceRecorder","controls","useContext","VoiceRecorder","componentDidMount","props","audioUpload","recorder","render","children","React","Component"],"mappings":"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"}